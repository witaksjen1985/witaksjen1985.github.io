(function($){var $window=$(window),windowHeight;$window.resize(function(){windowHeight=$(this).height()}).triggerHandler('resize');$.fn.parallax=function(xpos,ypos,speedFactor,outerHeight){var $this=$(this),getHeight,firstTop;xpos=xpos||"50%";ypos=ypos||0;speedFactor=speedFactor||0.5;if(typeof outerHeight==='undefined'){outerHeight=!0}
if(outerHeight){getHeight=function(jqo){return jqo.outerHeight(!0)}}else{getHeight=function(jqo){return jqo.height()}}
$window.bind('scroll resize',function(){var pos=$window.scrollTop();$this.each(function(){var $element=$(this),top=$element.offset().top,height=getHeight($element);firstTop=$this.offset().top;if(top+height<pos||top>pos+windowHeight){return}
$this.css('backgroundPosition',xpos+" "+Math.round(ypos+(firstTop-pos)*speedFactor)+"px")})}).triggerHandler('scroll')}})(jQuery)